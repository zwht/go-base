(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"6PfS":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("CcnG"),n=function(){function t(){var t=this;this.list=[{lable:"\u524d\u540e\u7a7a\u683c",value:/(^\s*)|(\s*$)/g},{lable:"\u7535\u8bdd\u7801",value:/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/},{lable:"\u90ae\u4ef6",value:/^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/}],this.listObj={},this.list.forEach(function(e){t.listObj[e.lable]=e.value})}return t.prototype.test=function(t,e){return this.listObj[e].test(t)},t.prototype.replace=function(t,e,a){return""!==e&&null!==e&&void 0!==e&&(e=e.replace(this.listObj[t],a)),e},t.ngInjectableDef=i.T({factory:function(){return new t},token:t,providedIn:"root"}),t}()},Iutu:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("ayZw"),n=a("CcnG"),r=function(){function t(t){this.url="/v1/vpn/:params1/:params2/:params3/:params4/:params5",this.urls={add:{method:"post",params:{params1:"add"}},list:{method:"post",params:{params1:"list"}},del:{method:"get",params:{params1:"del"}},update:{method:"post",params:{params1:"update"}},getById:{method:"get",params:{params1:"getById"}}},t.S(this)}return t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a))},token:t,providedIn:"root"}),t}()},KruO:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("ayZw"),n=a("CcnG"),r=function(){function t(t){this.url="/v1/vpn/relation/:params1/:params2/:params3/:params4/:params5",this.urls={add:{method:"post",params:{params1:"add"}},list:{method:"post",params:{params1:"list"}},del:{method:"get",params:{params1:"del"}},update:{method:"post",params:{params1:"update"}},updateState:{method:"get",params:{params1:"updateState"}},getById:{method:"get",params:{params1:"getById"}},getListByUserId:{method:"get",params:{params1:"list"}}},t.S(this)}return t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a))},token:t,providedIn:"root"}),t}()},TNBL:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a("KruO"),a("Iutu");var i=function(){function t(t,e,a){this.route=t,this.vpnService=e,this.vpnRelationService=a,this.userVpnList=[],this.vpnList=[],this.loading=!1,this.vpnRelation={vpnId:"",userId:"",overdueTime:new Date}}return t.prototype.ngOnInit=function(){this.vpnRelation.userId=this.route.snapshot.params.id,this.getVpnList(),this.getRelationByUserId()},t.prototype.del=function(t){var e=this;this.vpnRelationService.updateState({params:{id:t.relationId,vpnId:t.vpnId,state:2102},data:{}}).then(function(t){200==t.code&&(e.getVpnList(),e.getRelationByUserId())})},t.prototype.getRelationByUserId=function(){var t=this;this.vpnRelationService.getListByUserId({params:{id:this.vpnRelation.userId},data:{}}).then(function(e){200==e.code&&(t.userVpnList=e.data)})},t.prototype.getVpnList=function(){var t=this;this.vpnService.list({params:{params2:1,params3:1e3},data:{state:2001}}).then(function(e){200==e.code&&(t.vpnList=e.data.pageData)})},t.prototype.add=function(){var t=this;this.loading=!0,this.vpnRelationService.add({data:{userId:this.vpnRelation.userId,vpnId:this.vpnRelation.vpnId,overdueTime:new Date(this.vpnRelation.overdueTime).getTime()}}).then(function(e){t.loading=!1,t.getVpnList(),t.getRelationByUserId()})},t}()},Vfro:function(t,e,a){"use strict";a.d(e,"b",function(){return c}),a.d(e,"a",function(){return u});var i=a("yfM0"),n=a("joN7"),r=a("Z3ye"),s=a("eaBV"),o=a("TNBL"),c=[{path:"",component:i.a,data:{name:"\u7528\u6237",roles:[1001],menu:!0},canActivate:[s.a]},{path:"add",component:n.a,data:{name:"\u6dfb\u52a0\u7528\u6237",roles:[1001]},canActivate:[s.a]},{path:"update/:id",component:r.a,data:{name:"\u7f16\u8f91\u7528\u6237",roles:[1001]},canActivate:[s.a]},{path:"relation/:id",component:o.a,data:{name:"vpn\u7ed1\u5b9a",roles:[1001]},canActivate:[s.a]}],u=function(){}},WbZM:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("ayZw"),n=a("CcnG"),r=function(){function t(t){this.url="/v1/user/:params1/:params2/:params3/:params4/:params5",this.urls={add:{method:"post",params:{params1:"add"}},list:{method:"post",params:{params1:"list"}},login:{method:"post",params:{params1:"login"}},del:{method:"get",params:{params1:"del"}},update:{method:"post",params:{params1:"update"}},getById:{method:"get",params:{params1:"getById"}},updateState:{method:"get",params:{params1:"updateState"}},updatePassword:{method:"get",params:{params1:"updatePassword"}}},t.S(this)}return t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a))},token:t,providedIn:"root"}),t}()},Z3ye:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("gIcY"),n=(a("WbZM"),a("tn8F"),a("6PfS"),a("xFqP"),function(){function t(t,e,a,i,n,r,s){this.codeDataService=t,this._message=e,this.regExpService=a,this.fb=i,this.userService=n,this.route=r,this.router=s,this.loading=!1,this.id=0,this.checkOptionsOne=[]}return t.prototype.ngOnInit=function(){this.id=this.route.snapshot.params.id,this.getById(this.id),this.validateForm=this.fb.group({email:[null,[i.p.email]],name:[null,[i.p.required]],phone:[null,[i.p.required]],loginName:[null,[i.p.required]],lcode:[null,[i.p.required]]}),this.checkOptionsOne=JSON.parse(JSON.stringify(this.codeDataService.codeObjList[10])),this.checkOptionsOne=this.checkOptionsOne.filter(function(t){return 1001!=t.code})},t.prototype.submitForm=function(){var t=this;for(var e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity();if(this.validateForm.valid){this.loading=!0;var a=this.checkOptionsOne.filter(function(t){if(t.checked)return!0}).map(function(t){return t.code});this.userService.update({data:{id:this.id,loginName:this.validateForm.value.loginName.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),name:this.validateForm.value.name.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),phone:this.validateForm.value.phone.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),email:this.validateForm.value.email.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),roles:this.fanyi(a)}}).then(function(e){t.loading=!1,200===e.code?t.router.navigate(["/admin/user"]):t._message.create("error",e.msg,{nzDuration:4e3})})}},t.prototype.getById=function(t){var e=this;this.userService.getById({params:{params2:t},data:{}}).then(function(t){if(200==t.code){if(""!=t.data.roles){var a=t.data.roles.split(",");e.checkOptionsOne.forEach(function(t){a.forEach(function(e){t.code==e&&(t.checked=!0)})})}e.validateForm=e.fb.group({email:[t.data.email,[i.p.email]],name:[t.data.name,[i.p.required]],phone:[t.data.phone,[i.p.required]],loginName:[t.data.loginName,[i.p.required]],lcode:[e.checkOptionsOne,[i.p.required,function(t){var e=!1;return t.value&&t.value.forEach(function(t){t.checked&&(e=!0)}),e?null:{lcode:{info:"\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a"}}}]]})}})},t.prototype.fanyi=function(t){var e="";return t.forEach(function(t){e=e+","+t}),e=e.substr(1)},t}())},ayZw:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("CcnG"),n=a("t/Na"),r=function(){function t(t){this.http=t}return t.prototype.S=function(t){var e=this,a=function(a){t[a]=function(i,n,r){var s=Object.assign({},t.urls[a],i,{params:{}}),o=Object.assign({},t.urls[a].params,i.params),c=t.url,u="",d=c.split("/");for(var p in o)-1!=d.indexOf(":"+p)?c=c.replace(":"+p,o[p]):u+=(u?"&":"?")+p+"="+o[p];return c=c.split("/").filter(function(t){return":"!==t[0]}).join("/")+u,s.url=c,e.http[t.urls[a].method.toLowerCase()](s.url,JSON.stringify(s.data||{}),n||{}).toPromise().then(function(t){return t}).catch(function(t){return Promise.reject(t.message||t)})}};for(var i in t.urls)a(i)},t.ngInjectableDef=i.T({factory:function(){return new t(i.X(n.c))},token:t,providedIn:"root"}),t}()},eaBV:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var i=a("Ud2x"),n=a("CcnG"),r=a("ZYCi"),s=function(){function t(t,e){this.sessionService=t,this.router=e}return t.prototype.checkLogin=function(){return this.router.navigate(["/"]),!1},t.prototype.canActivate=function(t,e){if(!this.sessionService.getItem("token"))return this.checkLogin(),!1;var a=this.sessionService.getItem("roles")?this.sessionService.getItem("roles").split(","):[],i=!1;return t.data.roles&&t.data.roles.length?t.data.roles.forEach(function(t){a.forEach(function(e){t==e&&(i=!0)})}):i=!0,i},t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a),n.X(r.l))},token:t,providedIn:"root"}),t}()},joN7:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var i=a("gIcY"),n=(a("WbZM"),a("tn8F"),a("6PfS"),a("xFqP"),a("nUB0"),function(){function t(t,e,a,i,n,r,s){var o=this;this.groupService=t,this.codeDataService=e,this._message=a,this.regExpService=i,this.fb=n,this.userService=r,this.router=s,this.loading=!1,this.checkOptionsOne=[],this.parentIdList=[],this.confirmationValidator=function(t){return t.value?t.value!==o.validateForm.controls.password.value?{confirm:!0,error:!0}:void 0:{required:!0}}}return t.prototype.ngOnInit=function(){this.checkOptionsOne=JSON.parse(JSON.stringify(this.codeDataService.codeObjList[10])),this.checkOptionsOne=this.checkOptionsOne.filter(function(t){return 1001!=t.code}),this.checkOptionsOne[0].checked=!0,this.validateForm=this.fb.group({parentId:[null,[i.p.required]],email:[null,[i.p.email]],password:[null,[i.p.required]],checkPassword:[null,[i.p.required,this.confirmationValidator]],name:[null,[i.p.required]],phone:[null,[i.p.required]],loginName:[null,[i.p.required]],lcode:[null,[i.p.required,function(t){var e=!1;return t.value&&t.value.forEach(function(t){t.checked&&(e=!0)}),e?null:{lcode:{info:"\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a"}}}]]}),this.getList()},t.prototype.submitForm=function(){var t=this;for(var e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity();if(this.validateForm.valid){this.loading=!0;var a=this.checkOptionsOne.filter(function(t){if(t.checked)return!0}).map(function(t){return t.code});this.userService.add({data:{loginName:this.validateForm.value.loginName.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),name:this.validateForm.value.name.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),password:btoa(encodeURIComponent(this.validateForm.value.password.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""))),phone:this.validateForm.value.phone.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),email:this.validateForm.value.email.replace(this.regExpService.listObj["\u524d\u540e\u7a7a\u683c"],""),roles:this.setRoles(a),parentId:this.validateForm.value.parentId}}).then(function(e){t.loading=!1,200===e.code?(t.checkOptionsOne.forEach(function(t){t.checked=!1}),t.router.navigate(["/admin/user"])):t._message.create("error",e.msg,{nzDuration:4e3})})}},t.prototype.updateConfirmValidator=function(){var t=this;Promise.resolve().then(function(){return t.validateForm.controls.checkPassword.updateValueAndValidity()})},t.prototype.setRoles=function(t){var e="";return t.forEach(function(t){e=e+","+t}),e=e.substr(1)},t.prototype.getList=function(){var t=this;this.groupService.list({params:{params2:1,params3:1e3},data:{}}).then(function(e){200==e.code&&(t.parentIdList=e.data.pageData)})},t}())},nUB0:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("ayZw"),n=a("CcnG"),r=function(){function t(t){this.url="/v1/user/group/:params1/:params2/:params3/:params4/:params5",this.urls={add:{method:"post",params:{params1:"add"}},list:{method:"post",params:{params1:"list"}},del:{method:"get",params:{params1:"del"}},update:{method:"post",params:{params1:"update"}},getById:{method:"get",params:{params1:"getById"}}},t.S(this)}return t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a))},token:t,providedIn:"root"}),t}()},pPse:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("ayZw"),n=a("CcnG"),r=function(){function t(t){this.url="/v1/code/:params1/:params2/:params3/:params4/:params5",this.urls={add:{method:"post",params:{params1:"add"}},list:{method:"post",params:{params1:"list"}},del:{method:"get",params:{params1:"del"}},update:{method:"post",params:{params1:"update"}},getById:{method:"get",params:{params1:"getById"}}},t.S(this)}return t.ngInjectableDef=n.T({factory:function(){return new t(n.X(i.a))},token:t,providedIn:"root"}),t}()},xFqP:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var i=a("pPse"),n=a("Ud2x"),r=a("CcnG"),s=function(){function t(t,e){this.codeService=t,this.sessionService=e,this.codeList=[],this.codeObjList={},this.codeObj={},this.getDataLocalStorage()}return t.prototype.getDataLocalStorage=function(){this.sessionService.getItem("codeObjList")&&(this.codeObjList=JSON.parse(this.sessionService.getItem("codeObjList"))),this.sessionService.getItem("codeObj")&&(this.codeObj=JSON.parse(this.sessionService.getItem("codeObj"))),this.sessionService.getItem("codeList")&&(this.codeList=JSON.parse(this.sessionService.getItem("codeList")))},t.prototype.getData=function(){var t=this;this.codeService.list({params:{params2:1,params3:1e3},data:{}}).then(function(e){200==e.code&&(t.codeObjList={},t.codeObj={},t.codeList=e.data.pageData,t.codeList.forEach(function(e){t.codeObj[e.code]=e.name,t.codeObjList[e.groups]?t.codeObjList[e.groups].push(Object.assign({value:e.code,label:e.name},e)):t.codeObjList[e.groups]=[Object.assign({value:e.code,label:e.name},e)]}),t.sessionService.setItem("codeObjList",JSON.stringify(t.codeObjList)),t.sessionService.setItem("codeList",JSON.stringify(t.codeList)),t.sessionService.setItem("codeObj",JSON.stringify(t.codeObj)))})},t.ngInjectableDef=r.T({factory:function(){return new t(r.X(i.a),r.X(n.a))},token:t,providedIn:"root"}),t}()},yfM0:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a("WbZM"),a("xFqP");var i=function(){function t(t,e){this.userService=t,this.codeDataService=e,this.loginName=null,this.name=null,this.juese=null,this.zhungtai=null,this.pageSize=10,this.pageNum=1,this.totalCount=null,this.DATA=[],this.codeList=[],this.codeObjList={},this.codeObj={},this.list=[]}return t.prototype.ngOnInit=function(){this.codeObj=this.codeDataService.codeObj,this.getList()},t.prototype.getList=function(t){var e=this;t&&(this.pageNum=t),this.userService.list({params:{params2:this.pageNum,params3:this.pageSize},data:{loginName:this.loginName,name:this.name,phone:this.juese,email:this.zhungtai}}).then(function(t){200==t.code&&(t.data.pageData.forEach(function(t){t.roles=t.roles.split(",")}),e.list=t.data.pageData,e.totalCount=t.data.totalCount)})},t.prototype.cancel=function(){},t.prototype.deldeldel=function(t){var e=this;this.userService.del({params:{params2:t},data:{}}).then(function(t){200==t.code&&e.getList()})},t.prototype.StateOK=function(t){var e=this;this.userService.updateState({params:{id:t,state:!0},data:{}}).then(function(t){200==t.code&&e.getList()})},t.prototype.StateNO=function(t){var e=this;this.userService.updateState({params:{id:t,state:!1},data:{}}).then(function(t){200==t.code&&e.getList()})},t.prototype.fanyi=function(){},t}()}}]);